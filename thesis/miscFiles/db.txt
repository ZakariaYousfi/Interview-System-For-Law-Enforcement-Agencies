UserName	Password
postgres		abcdabcd

CREATE EXTENSION vector;
create table Person (personID int primary key, fullname varchar(50), birthday date, number int);
create type PType as enum ('مشتبه به','شاهد','ضحية');
create type CType as enum ('جريمة الكترونية','قتل','سرقة');
create table Affaire (affaireID int primary key, caseType CType, description varchar(100), creationDate date );
create table Audition (auditionID int primary key, personType PType, creationDate date, affaireID int, foreign key (affaireID) references Affaire);
create table PairQA (pairID bigint primary key, question varchar(150), answer varchar(150), auditionID int, foreign key (auditionID) references Audition);
ALTER TABLE pairqa ADD COLUMN qembedding vector(384);
ALTER TABLE pairqa ADD COLUMN aembedding vector(384);
create table Lieu (lieuID int primary key, wilaya varchar(20), daira varchar(20), commune varchar(20));
create table Agent(agentID int primary key, username varchar(50), pass varchar(50), fullname varchar(50));
create table AgentAffaire(agentAffaireID bigint primary key, agentID int, affaireID int, foreign key (agentID) references Agent, foreign key (affaireID) references Affaire);
create table relationPP(relationPPID bigint primary key, statementMakerID int, relatedPersonID int, auditionID int, foreign key (statementMakerID) references Person, foreign key (relatedPersonID) references Person, relation varchar(20), foreign key (auditionID) references Audition);
create table relationPL(relationPLID bigint primary key, existanceDate date, heur smallint, duration smallint, statementMakerID int, lieuID int, foreign key (statementMakerID) references Person, foreign key (lieuID) references Lieu);
ALTER TABLE audition ADD COLUMN personID int;
ALTER TABLE audition ADD foreign key (personID) references Person;
ALTER TABLE relationpl ADD COLUMN qaID bigint;
ALTER TABLE relationpp ADD COLUMN qaID bigint;
ALTER TABLE relationpl ADD foreign key (qaID) references pairqa;
ALTER TABLE relationpp ADD foreign key (qaID) references pairqa;

















INSERT INTO Person (personID, fullname, birthday, number)
                VALUES 
                (1,'بلماضي شعيب', '1970-01-01', 123456),
                (2, 'زرقاوي خيثر', '1970-10-15', 789012)
INSERT INTO Affaire (affaireID, caseType, description, creationDate)
                VALUES 
                (1, 'قتل', 'جريمة قتل في ملعب 5 جويلية', '2024-06-20'),
                (2, 'سرقة', 'سرقة محل باب الواد', '2024-06-23'),
                (3, 'جريمة الكترونية', 'قرصنة موقع الكتروني', '2024-06-24')
INSERT INTO Agent (agentID, username, pass, fullname)
                VALUES 
                (1, 'toufik1988', 'toufikmarbouh95', 'مربوح توفيق'),
                (2, 'yzakaria', 'yousfizakaria', 'يوسفي زكرياء')
INSERT INTO AgentAffaire (agentAffaireID, agentID, affaireID)
                VALUES 
                (1, 1, 1),
                (2, 2, 2),
                (3, 1, 2)
ALTER TABLE Affaire 
ALTER COLUMN affaireID ADD GENERATED BY DEFAULT AS IDENTITY;
                INSERT INTO Audition (personType, creationDate, affaireID, personID)
                VALUES 
                ( 'مشتبه به', '2024-06-20', 1, 1),
                ( 'مشتبه به', '2024-06-21', 1, 2)
-- Modify relationPP table
ALTER TABLE relationPP
DROP COLUMN statementMakerID,
DROP COLUMN relatedPersonID,
DROP COLUMN auditionID,
ADD COLUMN statementMakerName varchar(50),
ADD COLUMN relatedPersonName varchar(50);

-- Modify relationPL table
ALTER TABLE relationPL
DROP COLUMN statementMakerID,
ADD COLUMN statementMakerName varchar(50);

